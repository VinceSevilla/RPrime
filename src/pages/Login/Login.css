/* Container */
.login-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: #f4f6f9;
  font-family: Arial, sans-serif;
}

/* Form Box */
.login-form {
  background: #fff;
  padding: 30px 40px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  width: 350px;
}

/* Inputs */
.login-form input {
  width: 93%;
  padding: 12px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
}

/* Default login button */
.login-form button[type="submit"] {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: #4f46e5;
  color: white;
  font-size: 16px;
  cursor: pointer;
  transition: 0.2s;
  margin-bottom: 12px;
}

.login-form button[type="submit"]:hover {
  background: #4338ca;
}

/* Google button inside the box */
.google-login-btn {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: #db4437; /* Google red */
  color: white;
  font-size: 16px;
  cursor: pointer;
  transition: 0.2s;
}

.google-login-btn:hover {
  background: #c1351d;
}

/* Bottom text */
.login-text {
  margin-top: 15px;
  font-size: 14px;
}

.login-text a {
  color: #4f46e5;
  text-decoration: none;
}

.login-text a:hover {
  text-decoration: underline;
}

import React, { useState } from 'react';
import { supabase } from '../../client';
import { Link, useNavigate } from 'react-router-dom';
import './Login.css';

const Login = ({ setToken }) => {
  const navigate = useNavigate();

  const [formData, setFormData] = useState({
    email: '',
    password: ''
  });

  function handleChange(event) {
    setFormData(prevFormData => ({
      ...prevFormData,
      [event.target.name]: event.target.value
    }));
  }

  // Email + password login
  async function handleSubmit(e) {
    e.preventDefault();
    try {
      const { data, error } = await supabase.auth.signInWithPassword({
        email: formData.email,
        password: formData.password,
      });
      if (error) throw error;
      setToken(data);
      navigate('/homepage');
    } catch (error) {
      alert(error.message);
    }
  }

  // Google login
  async function handleGoogleLogin() {
    try {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'google',
        options: {
          redirectTo: 'http://localhost:5173/homepage',
          queryParams: {
            prompt: 'select_account', 
          },
        },
      });
      if (error) throw error;
      console.log('Google login started:', data);
    } catch (error) {
      alert(error.message);
    }
  }

  return (
    <div className="login-container">
      <form className="login-form" onSubmit={handleSubmit}>
        <input
          placeholder="Email"
          name="email"
          onChange={handleChange}
        />
        <input
          placeholder="Password"
          name="password"
          type="password"
          onChange={handleChange}
        />

        <button type="submit">Login</button>

        {/* Google Login Button INSIDE the box */}
        <button 
          type="button" 
          className="google-login-btn" 
          onClick={handleGoogleLogin}
        >
          Continue with Google
        </button>
      </form>

      <p className="login-text">
        Don't have an account? <Link to="/signup">Sign Up</Link>
      </p>
    </div>
  );
};

export default Login;

